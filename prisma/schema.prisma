generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model comments {
  id             Int      @id @default(autoincrement())
  id_user        Int
  id_review      Int
  text           String?  @db.VarChar(10000)
  create_time    DateTime @default(now()) @db.DateTime(0)
  last_edit_time DateTime @default(now()) @db.DateTime(0)

  @@index([id_review], map: "id_review")
  @@index([id_user], map: "id_user")
}

model reviews {
  id             Int                 @id @default(autoincrement())
  uuid           String              @unique(map: "uuid") @db.Char(15)
  id_user        Int
  id_entity      String              @db.VarChar(200)
  rating         Int                 @db.UnsignedTinyInt
  entity_type    reviews_entity_type
  text           String?             @db.VarChar(10000)
  create_time    DateTime            @default(now()) @db.DateTime(0)
  last_edit_time DateTime            @default(now()) @db.DateTime(0)

  @@unique([id_user, id_entity, entity_type], map: "id_user")
}

model users {
  id            Int      @id @default(autoincrement())
  uuid          String   @unique(map: "uuid") @db.Char(15)
  email         String   @unique(map: "email") @db.VarChar(255)
  name          String   @db.VarChar(50)
  password      String   @db.Char(60)
  register_time DateTime @default(now()) @db.DateTime(0)
}

model refreshtokens {
  id_user       Int    @id
  refresh_token String @db.VarChar(512)
}

enum reviews_entity_type {
  movie
  series
  game
  book
  music
}
